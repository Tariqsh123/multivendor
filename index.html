<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlobalMart - India's Biggest Multi-Vendor Marketplace</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <!-- Navigation - White -->
   <nav class="navbar">
        <div class="container nav-container">
            <a href="index.html" class="logo"><img src="assets/logo.png" id="logo" alt=""></a>
            
            <div class="nav-menu" id="navMenu">
    <a href="index.html" class="nav-link active">Home</a>
    <a href="about.html" class="nav-link">About</a>
    <a href="products.html" class="nav-link">Products</a>
    <a href="research-hub.html" class="nav-link">Research Hub</a>
    <a href="faq.html" class="nav-link">FAQs</a>
    <a href="account.html" class="nav-link">Account</a>
    <a href="dashboard.html" class="nav-link dashboard-link" style="display:none;">Dashboard</a>

    <div id="wish-and-cart-menu">
    <!-- Wishlist Icon manually added -->
    <a href="dashboard.html#wishlist" class="nav-link wishlist-icon" id="wishlistIcon">
        <i class="fas fa-heart"></i>
        <span class="wishlist-count">0</span>
    </a>

    <!-- Cart Icon -->
    <a href="#" class="nav-link cart-icon" id="cartIcon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count">0</span>
    </a>
    </div>
</div>

            
            <button class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Mobile Floating Buttons -->
    <div class="mobile-cart-floating-button">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count">0</span>
    </div>
    <div class="mobile-wishlist-floating-button">
        <i class="fas fa-heart"></i>
        <span class="wishlist-count">0</span>
    </div>

    <!-- Hero Section -->
    <section class="hero-carousel">
        <div class="hero-track">
            <div class="hero-slide hero-active" style="background-image: url('https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');">
                <div class="hero-content">
                    <span class="hero-badge">âœ¨ MEGA SALE 2024</span>
                    <h1 class="hero-title">Shop From Multiple<br><span>Trusted Online Stores</span></h1>
                    <p class="hero-text">Discover thousands of products from verified sellers. Enjoy secure payments, fast shipping, and a seamless multi-vendor shopping experience with 24/7 support.</p>
                    <div class="hero-btns">
                        <a href="products.html" class="hero-btn hero-btn-primary">Start Shopping <i class="fas fa-arrow-right"></i></a>
                        <a href="account.html" class="hero-btn hero-btn-outline">Become a Seller</a>
                    </div>
                </div>
            </div>
            <div class="hero-slide" style="background-image: url('https://images.unsplash.com/photo-1556740749-887f6717d7e4?auto=format&fit=crop&w=1600&q=80');">
                <div class="hero-content">
                    <span class="hero-badge">ðŸš€ FOR SELLERS</span>
                    <h1 class="hero-title">Launch & Manage<br><span>Your Online Store</span></h1>
                    <p class="hero-text">Register as a store manager, list your products, manage orders, track sales, and grow your business on our powerful multi-vendor marketplace platform.</p>
                    <div class="hero-btns">
                        <a href="account.html" class="hero-btn hero-btn-primary">Become a Seller <i class="fas fa-arrow-right"></i></a>
                        <a href="return-policy.html" class="hero-btn hero-btn-outline">Learn More</a>
                    </div>
                </div>
            </div>
            <div class="hero-slide" style="background-image: url('https://images.unsplash.com/photo-1601584115197-04ecc0da31d7?auto=format&fit=crop&w=1600&q=80');">
                <div class="hero-content">
                    <span class="hero-badge">ðŸ“¦ DELIVERY PARTNERS</span>
                    <h1 class="hero-title">Deliver Orders &<br><span>Earn With Logistics</span></h1>
                    <p class="hero-text">Join as a shipping partner to deliver orders, manage deliveries, track shipments, and earn competitive commissions through our reliable delivery network.</p>
                    <div class="hero-btns">
                        <a href="account.html" class="hero-btn hero-btn-primary">Join as Shipper <i class="fas fa-arrow-right"></i></a>
                        <a href="shipping-policy.html" class="hero-btn hero-btn-outline">Shipping Policy</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="hero-dots">
            <span class="hero-dot hero-active"></span>
            <span class="hero-dot"></span>
            <span class="hero-dot"></span>
        </div>
    </section>

    <script>
        const heroTrack = document.querySelector('.hero-track');
        const heroSlides = document.querySelectorAll('.hero-slide');
        const heroDots = document.querySelectorAll('.hero-dot');
        let heroIndex = 0;

        function heroUpdate() {
            heroTrack.style.transform = `translateX(-${heroIndex * 100}%)`;
            heroDots.forEach(d => d.classList.remove('hero-active'));
            heroDots[heroIndex].classList.add('hero-active');
        }

        setInterval(() => {
            heroIndex = (heroIndex + 1) % heroSlides.length;
            heroUpdate();
        }, 6000);

        heroDots.forEach((dot, i) => {
            dot.onclick = () => {
                heroIndex = i;
                heroUpdate();
            };
        });
    </script>

    <!-- WOW Category Section - With Images and Overlay -->
    <section class="category-section">
        <div class="container">
            <div class="section-header">
                <h2>Shop by <span>Category</span></h2>
                <p>Explore millions of products from trusted sellers across 1000+ categories</p>
            </div>
            <div class="category-grid">
                <a href="products.html?category=electronics" class="category-card">
                    <img src="https://images.unsplash.com/photo-1498049794561-7780e7231661?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Electronics">
                    <span class="category-badge">ðŸ”¥ Hot</span>
                    <div class="overlay">
                        <h3>Electronics</h3>
                        <p>Smartphones, Laptops, Accessories</p>
                    </div>
                </a>
                <a href="products.html?category=fashion" class="category-card">
                    <img src="https://images.unsplash.com/photo-1445205170230-053b83016050?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Fashion">
                    <span class="category-badge">New</span>
                    <div class="overlay">
                        <h3>Fashion</h3>
                        <p>Men, Women, Kids, Accessories</p>
                    </div>
                </a>
                <a href="products.html?category=home" class="category-card">
                    <img src="https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Home">
                    <div class="overlay">
                        <h3>Home & Living</h3>
                        <p>Furniture, Decor, Kitchenware</p>
                    </div>
                </a>
                <a href="products.html?category=sports" class="category-card">
                    <img src="https://images.unsplash.com/photo-1517466787929-bc90951d0974?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Sports">
                    <div class="overlay">
                        <h3>Sports</h3>
                        <p>Gym Equipment, Outdoor Gear</p>
                    </div>
                </a>
                <a href="products.html?category=beauty" class="category-card">
                    <img src="https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Beauty">
                    <span class="category-badge">Trending</span>
                    <div class="overlay">
                        <h3>Beauty</h3>
                        <p>Makeup, Skincare, Haircare</p>
                    </div>
                </a>
                <a href="products.html?category=books" class="category-card">
                    <img src="https://images.unsplash.com/photo-1495446815901-a7297e633e8d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Books">
                    <div class="overlay">
                        <h3>Books</h3>
                        <p>Fiction, Academic, Bestsellers</p>
                    </div>
                </a>
                <a href="products.html?category=grocery" class="category-card">
                    <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Grocery">
                    <div class="overlay">
                        <h3>Grocery</h3>
                        <p>Fresh Food, Staples, Snacks</p>
                    </div>
                </a>
                <a href="products.html?category=toys" class="category-card">
                    <img src="https://images.unsplash.com/photo-1566576912321-d58ddd7a6088?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Toys">
                    <div class="overlay">
                        <h3>Toys & Games</h3>
                        <p>Educational, Action Figures, Puzzles</p>
                    </div>
                </a>
                <a href="products.html?category=automotive" class="category-card">
                    <img src="https://images.unsplash.com/photo-1580273916550-e323be2ae537?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Automotive">
                    <div class="overlay">
                        <h3>Automotive</h3>
                        <p>Accessories, Parts, Care</p>
                    </div>
                </a>
                <a href="products.html?category=health" class="category-card">
                    <img src="https://images.unsplash.com/photo-1505751172876-fa1923c5c528?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Health">
                    <div class="overlay">
                        <h3>Health</h3>
                        <p>Supplements, Wellness, Medical</p>
                    </div>
                </a>
                <a href="products.html?category=jewelry" class="category-card">
                    <img src="https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Jewelry">
                    <div class="overlay">
                        <h3>Jewelry</h3>
                        <p>Gold, Silver, Fashion Jewelry</p>
                    </div>
                </a>
                <a href="products.html?category=pets" class="category-card">
                    <img src="https://images.unsplash.com/photo-1450778869180-41d0601e046e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Pets">
                    <div class="overlay">
                        <h3>Pet Supplies</h3>
                        <p>Food, Toys, Accessories</p>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="why-choose-us-section">
        <div class="container">
            <div class="section-header">
                <h2>Why Choose <span>GlobalMart?</span></h2>
                <p>A powerful ecosystem built for customers, sellers, and delivery partners</p>
            </div>
            <div class="why-choose-us-grid">
                <a href="research-and-market-intelligence.html" class="why-choose-us-card">
                    <div class="why-choose-us-icon"><i class="fas fa-chart-line"></i></div>
                    <h3>Market Intelligence</h3>
                    <p>Data-driven insights on global demand, pricing trends, and consumer behavior to help you make informed decisions.</p>
                    <span class="learn-more-btn">Learn More â†’</span>
                </a>
                <a href="smart-sourcing-and-supply-chain.html" class="why-choose-us-card">
                    <div class="why-choose-us-icon"><i class="fas fa-industry"></i></div>
                    <h3>Smart Sourcing</h3>
                    <p>Direct sourcing from China and Pakistan with verified suppliers, quality assurance, and private-label support.</p>
                    <span class="learn-more-btn">Learn More â†’</span>
                </a>
                <a href="global-commerce-and-logistics.html" class="why-choose-us-card">
                    <div class="why-choose-us-icon"><i class="fas fa-globe"></i></div>
                    <h3>Global Logistics</h3>
                    <p>Sell worldwide with dual delivery models, cross-border logistics, and market-specific fulfillment centers.</p>
                    <span class="learn-more-btn">Learn More â†’</span>
                </a>
                <a href="#" class="why-choose-us-card">
                    <div class="why-choose-us-icon"><i class="fas fa-graduation-cap"></i></div>
                    <h3>Seller Education</h3>
                    <p>Step-by-step training, expert guidance, and research support to turn beginners into successful entrepreneurs.</p>
                    <span class="learn-more-btn">Learn More â†’</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Products Filter & Search -->
    <!-- <section class="products-filter">
        <div class="container">
            <div class="filter-container">
                <div class="search-box">
                    <input type="text" id="productSearch" placeholder="Search for products, brands, categories...">
                    <button><i class="fas fa-search"></i></button>
                </div>
                <div class="filter-options">
                    <select id="categoryFilter">
                        <option value="">All Categories</option>
                        <option value="electronics">Electronics</option>
                        <option value="clothing">Fashion</option>
                        <option value="home">Home & Living</option>
                        <option value="sports">Sports</option>
                        <option value="beauty">Beauty</option>
                        <option value="books">Books</option>
                    </select>
                    <select id="storeFilter">
                        <option value="">All Sellers</option>
                    </select>
                    <select id="sortFilter">
                        <option value="featured">Featured</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="newest">Newest First</option>
                        <option value="popular">Best Selling</option>
                    </select>
                </div>
            </div>
        </div>
    </section> -->

    <!-- Products Grid - Exact copy from reference code -->
     <div class="heading-section">
      <h2>Latest <span> Product</span></h2>
     </div>
    <section class="products-section">
        <div class="container">
            <div class="products-grid" id="productsGrid"></div>
            <div class="loading" id="productsLoading">
                <div class="spinner"></div>
                <p>Loading products...</p>
            </div>
            <div class="no-products" id="noProducts" style="display: none;">
                <i class="fas fa-search"></i>
                <h3>No products found</h3>
                <p>Try adjusting your search or filter criteria</p>
            </div>
        </div>
    </section>

    <!-- Promo Section - Big & Professional -->
    <section class="promo-section">
        <div class="container">
            <div class="section-header">
                <h2>Limited Time <span>Offers</span></h2>
                <p>Grab these deals before they're gone - Up to 70% off + Extra 10% off on first order</p>
            </div>
            <div class="promo-grid">
                <div class="promo-card">
                    <div class="promo-img" style="background-image: url('https://images.unsplash.com/photo-1600086827875-a63b01f1335c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80');"></div>
                    <div class="promo-overlay">
                        <div class="promo-discount">70% OFF</div>
                        <div class="promo-product">Electronics Sale</div>
                        <div class="promo-desc">Smartphones, Laptops, Accessories</div>
                    </div>
                </div>
                <div class="promo-card">
                    <div class="promo-img" style="background-image: url('https://images.unsplash.com/photo-1445205170230-053b83016050?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80');"></div>
                    <div class="promo-overlay">
                        <div class="promo-discount">50% OFF</div>
                        <div class="promo-product">Fashion Festival</div>
                        <div class="promo-desc">Men, Women, Kids Collection</div>
                    </div>
                </div>
                <div class="promo-card">
                    <div class="promo-img" style="background-image: url('https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80');"></div>
                    <div class="promo-overlay">
                        <div class="promo-discount">60% OFF</div>
                        <div class="promo-product">Home Decor</div>
                        <div class="promo-desc">Furniture, Kitchen, Garden</div>
                    </div>
                </div>
                <div class="promo-card">
                    <div class="promo-img" style="background-image: url('https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80');"></div>
                    <div class="promo-overlay">
                        <div class="promo-discount">40% OFF</div>
                        <div class="promo-product">Beauty & Wellness</div>
                        <div class="promo-desc">Makeup, Skincare, Haircare</div>
                    </div>
                </div>
                <div class="promo-card">
                    <div class="promo-img" style="background-image: url('https://images.unsplash.com/photo-1517466787929-bc90951d0974?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80');"></div>
                    <div class="promo-overlay">
                        <div class="promo-discount">55% OFF</div>
                        <div class="promo-product">Sports Gear</div>
                        <div class="promo-desc">Gym, Outdoor, Cycling</div>
                    </div>
                </div>
                <div class="promo-card">
                    <div class="promo-img" style="background-image: url('https://images.unsplash.com/photo-1589998059171-988d887df646?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80');"></div>
                    <div class="promo-overlay">
                        <div class="promo-discount">30% OFF</div>
                        <div class="promo-product">Books & Media</div>
                        <div class="promo-desc">Bestsellers, Academic, Fiction</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonial Section - Fixed with jQuery Infinite Loop -->
    <section class="testimonial-section">
        <div class="testimonial-container">
            <h2 class="testimonial-title">What Our Customers Say</h2>

            <div class="testimonial-track-wrapper">
                <button class="testimonial-arrow testimonial-prev">&#10094;</button>
                <button class="testimonial-arrow testimonial-next">&#10095;</button>

                <div class="testimonial-track">
                    <div class="testimonial-card">
                        <p class="testimonial-text">"GlobalMart transformed my business! As a seller, managing products and orders has never been easier. The platform is intuitive and the support team is amazing."</p>
                        <div class="testimonial-rating">â˜…â˜…â˜…â˜…â˜…</div>
                        <div class="testimonial-user">
                            <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Jane Doe">
                            <div>
                                <h4>Jane Doe</h4>
                                <span>Store Manager</span>
                            </div>
                        </div>
                    </div>

                    <div class="testimonial-card">
                        <p class="testimonial-text">"Shopping on GlobalMart is seamless. I love the variety of stores and fast delivery! The product quality is always top-notch and customer service is excellent."</p>
                        <div class="testimonial-rating">â˜…â˜…â˜…â˜…â˜…</div>
                        <div class="testimonial-user">
                            <img src="https://randomuser.me/api/portraits/men/45.jpg" alt="John Smith">
                            <div>
                                <h4>John Smith</h4>
                                <span>Customer</span>
                            </div>
                        </div>
                    </div>

                    <div class="testimonial-card">
                        <p class="testimonial-text">"As a shipper, GlobalMart's logistics platform makes tracking and delivering orders simple and rewarding. Great earnings and flexible working hours!"</p>
                        <div class="testimonial-rating">â˜…â˜…â˜…â˜…â˜…</div>
                        <div class="testimonial-user">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Alex Lee">
                            <div>
                                <h4>Alex Lee</h4>
                                <span>Shipper</span>
                            </div>
                        </div>
                    </div>

                    <div class="testimonial-card">
                        <p class="testimonial-text">"The multi-vendor platform makes it easy to compare products and sellers in one place. Highly recommend GlobalMart to everyone!"</p>
                        <div class="testimonial-rating">â˜…â˜…â˜…â˜…â˜…</div>
                        <div class="testimonial-user">
                            <img src="https://randomuser.me/api/portraits/women/50.jpg" alt="Sara Kim">
                            <div>
                                <h4>Sara Kim</h4>
                                <span>Customer</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="testimonial-dots"></div>
        </div>
    </section>

    <!-- Role Section - Original Styles -->
    <section class="roles">
        <div class="container">
            <div class="section-header">
                <h2>Choose Your <span>Role</span></h2>
                <p>Join GlobalMart as a customer, seller, or delivery partner</p>
            </div>
            <div class="roles-grid">
                <div class="role-card">
                    <div class="role-icon"><i class="fas fa-shipping-fast"></i></div>
                    <h3>Shipper</h3>
                    <p>Upload products to warehouse, set prices, earn commissions, and manage inventory efficiently with our smart tools.</p>
                    <a href="account.html?role=shipper" class="btn-small">Sign Up as Shipper</a>
                </div>

                <div class="role-card">
                    <div class="role-icon"><i class="fas fa-store"></i></div>
                    <h3>Store Manager</h3>
                    <p>Browse warehouse products, add to your store, and manage storefront and sales seamlessly with analytics.</p>
                    <a href="account.html?role=manager" class="btn-small">Sign Up as Manager</a>
                </div>

                <div class="role-card">
                    <div class="role-icon"><i class="fas fa-user"></i></div>
                    <h3>Customer</h3>
                    <p>Browse all stores, add to cart, checkout securely, and track your orders effortlessly with our app.</p>
                    <a href="account.html?role=customer" class="btn-small">Sign Up as Customer</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>GlobalMart</h3>
                    <p>India's fastest growing multi-vendor B2B and B2C marketplace connecting sellers to customers worldwide.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="research-hub.html">Research Hub</a></li>
                        <li><a href="account.html">Account</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="shipping-policy.html">Shipping Policy</a></li>
                        <li><a href="return-policy.html">Return Policy</a></li>
                        <li><a href="contact-us.html">Contact Us</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contact Info</h4>
                    <ul class="contact-info">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Business Ave, Shanghai, China</li>
                        <li><i class="fas fa-phone"></i> +86 123 456 7890</li>
                        <li><i class="fas fa-envelope"></i> info@globalmart.com</li>
                        <li><i class="fas fa-clock"></i> Mon - Sat: 24/7 Support</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 GlobalMart. All rights reserved. | Designed for Educational Purposes | Version 2.0</p>
            </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Your Shopping Cart</h3>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart">
                <i class="fas fa-shopping-cart"></i>
                <p>Your cart is empty</p>
                <small>Add items to get started</small>
            </div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span class="total-price">â‚¹0</span>
            </div>
            <button class="btn btn-primary btn-block" id="checkoutBtn">Proceed to Checkout</button>
        </div>
    </div>
    <div class="cart-overlay" id="cartOverlay"></div>

    <script src="js/main.js"></script>
    <script src="js/wishlist.js"></script>
    <script src="js/cart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            updateCartCount();
            loadProducts();
            setupFilters();
        });
        
        async function loadProducts() {
            document.getElementById('productsLoading').style.display = 'flex';
            document.getElementById('noProducts').style.display = 'none';
            
            try {
                const response = await fetch('data/product.json');
                
                if (!response.ok) {
                    throw new Error('Failed to load products');
                }
                
                const productData = await response.json();
                
                const warehouseProducts = productData.warehouseProducts || [];
                const storeProducts = productData.storeProducts || [];
                
                const allProducts = [
                    ...storeProducts,
                    ...warehouseProducts.map(p => ({
                        ...p,
                        fromWarehouse: true,
                        store: p.shipperName || 'Warehouse'
                    }))
                ];
                
                localStorage.setItem('warehouseProducts', JSON.stringify(warehouseProducts));
                localStorage.setItem('storeProducts', JSON.stringify(storeProducts));
                
                const storeFilter = document.getElementById('storeFilter');
                const uniqueStores = [...new Set(allProducts.map(p => p.store || p.shipperName).filter(Boolean))];
                
                uniqueStores.forEach(store => {
                    const option = document.createElement('option');
                    option.value = store;
                    option.textContent = store;
                    if (storeFilter) storeFilter.appendChild(option);
                });
                
                renderProducts(allProducts);
                
            } catch (error) {
                console.error('Error loading products:', error);
                document.getElementById('noProducts').style.display = 'block';
                document.getElementById('noProducts').innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Unable to Load Products</h3>
                    <p>Please try refreshing the page</p>
                `;
            } finally {
                document.getElementById('productsLoading').style.display = 'none';
            }
        }
        
        function renderProducts(products) {
            const container = document.getElementById('productsGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (products.length === 0) {
                document.getElementById('noProducts').style.display = 'block';
                return;
            }
            
            products.forEach(product => {
                const productElement = document.createElement('div');
                productElement.className = 'product-card';
                
                const hasDiscount = product.originalPrice && product.originalPrice > product.price;
                const discountPercent = hasDiscount ? Math.round((1 - product.price/product.originalPrice) * 100) : 0;
                
                productElement.innerHTML = `
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.name}" 
                             onerror="this.src='https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80'">
                        ${product.fromWarehouse ? '<div class="warehouse-badge">Warehouse</div>' : ''}
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-store">Sold by: ${product.store || product.shipperName || 'GlobalMart'}</p>
                        <div class="star-rating">
                            ${generateStarRating(4.5)}
                        </div>
                        <p class="product-desc">${product.description || 'Premium quality product'}</p>
                        <div class="product-price">$${product.price.toFixed(2)}</div>
                        ${product.commission ? `<div class="commission-badge">${product.commission}% Commission</div>` : ''}
                        <button class="btn btn-small add-to-cart" 
                                data-id="${product.id}" 
                                data-name="${product.name}" 
                                data-price="${product.price}" 
                                data-image="${product.image}">
                            Add to Cart
                        </button>
                        <a href="product-detail.html?id=${product.id}" class="btn btn-outline btn-small view-details">View Details</a>
                    </div>
                `;
                container.appendChild(productElement);
            });
            
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const product = {
                        id: this.dataset.id,
                        name: this.dataset.name,
                        price: parseFloat(this.dataset.price),
                        image: this.dataset.image,
                        quantity: 1
                    };
                    
                    if (typeof addToCart === 'function') {
                        addToCart(product);
                    } else {
                        let cart = JSON.parse(localStorage.getItem('cart')) || [];
                        const existing = cart.find(item => item.id == product.id);
                        if (existing) {
                            existing.quantity += 1;
                        } else {
                            cart.push(product);
                        }
                        localStorage.setItem('cart', JSON.stringify(cart));
                    }
                    
                    updateCartCount();
                    showToast(`${product.name} added to cart`);
                });
            });
        }
        
        function generateStarRating(rating) {
            let stars = '';
            for (let i = 0; i < 5; i++) {
                if (i < Math.floor(rating)) {
                    stars += '<i class="fas fa-star"></i>';
                } else if (i < rating) {
                    stars += '<i class="fas fa-star-half-alt"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            return stars;
        }
        
        function setupFilters() {
            const searchInput = document.getElementById('productSearch');
            const categoryFilter = document.getElementById('categoryFilter');
            const storeFilter = document.getElementById('storeFilter');
            const sortFilter = document.getElementById('sortFilter');
            
            if (!searchInput || !categoryFilter || !sortFilter) return;
            
            const filterProducts = () => {
                const searchTerm = searchInput.value.toLowerCase();
                const category = categoryFilter.value;
                const store = storeFilter ? storeFilter.value : '';
                const sort = sortFilter.value;
                
                const warehouseProducts = JSON.parse(localStorage.getItem('warehouseProducts')) || [];
                const storeProducts = JSON.parse(localStorage.getItem('storeProducts')) || [];
                
                let allProducts = [
                    ...storeProducts,
                    ...warehouseProducts.map(p => ({
                        ...p,
                        fromWarehouse: true,
                        store: p.shipperName || 'Warehouse'
                    }))
                ];
                
                if (searchTerm) {
                    allProducts = allProducts.filter(p => 
                        p.name.toLowerCase().includes(searchTerm) || 
                        (p.description && p.description.toLowerCase().includes(searchTerm)) ||
                        (p.store && p.store.toLowerCase().includes(searchTerm)) ||
                        (p.shipperName && p.shipperName.toLowerCase().includes(searchTerm))
                    );
                }
                
                if (category) {
                    allProducts = allProducts.filter(p => p.category === category);
                }
                
                if (store && storeFilter) {
                    allProducts = allProducts.filter(p => (p.store || p.shipperName) === store);
                }
                
                if (sort === 'price-low') {
                    allProducts.sort((a, b) => a.price - b.price);
                } else if (sort === 'price-high') {
                    allProducts.sort((a, b) => b.price - a.price);
                } else if (sort === 'newest') {
                    allProducts.sort((a, b) => {
                        if (a.createdAt && b.createdAt) {
                            return new Date(b.createdAt) - new Date(a.createdAt);
                        }
                        return (b.id || 0) - (a.id || 0);
                    });
                }
                
                renderProducts(allProducts);
            };
            
            searchInput.addEventListener('input', filterProducts);
            categoryFilter.addEventListener('change', filterProducts);
            if (storeFilter) storeFilter.addEventListener('change', filterProducts);
            sortFilter.addEventListener('change', filterProducts);
        }
        
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const count = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
            
            document.querySelectorAll('.cart-count').forEach(el => {
                el.textContent = count;
            });
        }
        
        function showToast(message) {
            const existingToast = document.querySelector('.toast');
            if (existingToast) existingToast.remove();
            
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <i class="fas ${message.includes('added') ? 'fa-check-circle' : 'fa-info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>

    <!-- jQuery Testimonial Carousel with Infinite Loop -->
    <script>
        $(document).ready(function() {
            const $track = $('.testimonial-track');
            const $cards = $('.testimonial-card');
            const $prev = $('.testimonial-prev');
            const $next = $('.testimonial-next');
            const $dotsContainer = $('.testimonial-dots');
            
            if ($cards.length === 0) return;
            
            // Clone cards for infinite loop
            $cards.each(function() {
                const cloneFirst = $(this).clone(true);
                const cloneLast = $(this).clone(true);
                $track.append(cloneFirst);
                $track.prepend(cloneLast);
            });
            
            const cardCount = $cards.length;
            let cardWidth = $cards.outerWidth(true);
            let currentIndex = cardCount;
            
            // Set initial position
            $track.css('transform', `translateX(-${currentIndex * cardWidth}px)`);
            
            // Create dots
            for (let i = 0; i < cardCount; i++) {
                const $dot = $('<span class="testimonial-dot"></span>');
                if (i === 0) $dot.addClass('active');
                $dot.on('click', function() {
                    goToSlide(i);
                });
                $dotsContainer.append($dot);
            }
            
            const $dots = $('.testimonial-dot');
            
            function updateDots() {
                const activeIndex = (currentIndex % cardCount + cardCount) % cardCount;
                $dots.removeClass('active');
                $dots.eq(activeIndex).addClass('active');
            }
            
            function goToSlide(index) {
                currentIndex = index + cardCount;
                $track.css('transition', 'transform 0.5s ease');
                $track.css('transform', `translateX(-${currentIndex * cardWidth}px)`);
                updateDots();
            }
            
            function moveSlide(direction) {
                currentIndex += direction;
                $track.css('transition', 'transform 0.5s ease');
                $track.css('transform', `translateX(-${currentIndex * cardWidth}px)`);
                updateDots();
            }
            
            $next.on('click', function() {
                moveSlide(1);
            });
            
            $prev.on('click', function() {
                moveSlide(-1);
            });
            
            // Infinite loop reset
            $track.on('transitionend', function() {
                if (currentIndex >= cardCount * 2) {
                    currentIndex = cardCount;
                    $track.css('transition', 'none');
                    $track.css('transform', `translateX(-${currentIndex * cardWidth}px)`);
                }
                if (currentIndex <= 0) {
                    currentIndex = cardCount * 2 - 1;
                    $track.css('transition', 'none');
                    $track.css('transform', `translateX(-${currentIndex * cardWidth}px)`);
                }
            });
            
            // Auto slide
            let autoSlide = setInterval(function() {
                $next.click();
            }, 5000);
            
            // Pause on hover
            $('.testimonial-track-wrapper').hover(
                function() { clearInterval(autoSlide); },
                function() { autoSlide = setInterval(function() { $next.click(); }, 5000); }
            );
            
            // Update on resize
            $(window).on('resize', function() {
                cardWidth = $cards.outerWidth(true);
                $track.css('transition', 'none');
                $track.css('transform', `translateX(-${currentIndex * cardWidth}px)`);
            });
        });
    </script>
</body>
</html>